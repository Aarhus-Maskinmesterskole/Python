# ğŸ”§ **4.5 Datamanipulation i Pandas**  

NÃ¥r vi har indlÃ¦st og filtreret vores data, vil vi ofte **Ã¦ndre, transformere og manipulere det** for at gÃ¸re det klar til analyse.  
I dette modul lÃ¦rer du at **tilfÃ¸je og fjerne kolonner**, **Ã¦ndre vÃ¦rdier**, **hÃ¥ndtere manglende data** og **transformere data**.  

> **MÃ¥l for dette modul:**  
> âœ… TilfÃ¸je, Ã¦ndre og slette kolonner  
> âœ… Erstatte og Ã¦ndre vÃ¦rdier i et datasÃ¦t  
> âœ… HÃ¥ndtere manglende data korrekt  
> âœ… Sortere og transformere data effektivt  

---

## ğŸ“Œ **1. TilfÃ¸je og fjerne kolonner**  

### **1.1 TilfÃ¸je en ny kolonne**  

```python
import pandas as pd

df = pd.read_csv("data.csv")

# TilfÃ¸j en ny kolonne baseret pÃ¥ eksisterende data
df["Alder om 5 Ã¥r"] = df["Alder"] + 5

print(df.head())
```

### **1.2 Slette en kolonne**  

```python
df.drop(columns=["Alder om 5 Ã¥r"], inplace=True)
```

> **ğŸ“Œ Brug `inplace=True` for at Ã¦ndre DataFrame direkte.**  

---

## ğŸ”„ **2. Ã†ndre vÃ¦rdier i en kolonne**  

```python
# Erstat en specifik vÃ¦rdi
df["By"] = df["By"].replace("KÃ¸benhavn", "CPH")

# Erstat flere vÃ¦rdier pÃ¥ Ã©n gang
df["Status"] = df["Status"].replace({"Aktiv": "A", "Inaktiv": "I"})
```

> **ğŸ“Œ Brug `.replace()` til at erstatte vÃ¦rdier i en kolonne.**  

---

## âš  **3. HÃ¥ndtering af manglende vÃ¦rdier (`NaN`)**  

### **3.1 Tjek for manglende vÃ¦rdier**  

```python
print(df.isnull().sum())  # TÃ¦l manglende vÃ¦rdier per kolonne
```

### **3.2 Fjerne rÃ¦kker med manglende vÃ¦rdier**  

```python
df_cleaned = df.dropna()
```

### **3.3 Erstatte manglende vÃ¦rdier**  

```python
df["Alder"].fillna(df["Alder"].mean(), inplace=True)  # Erstat med gennemsnit
```

> **ğŸ“Œ `fillna()` bruges til at erstatte `NaN`-vÃ¦rdier med en standardvÃ¦rdi.**  

---

## ğŸ” **4. Sortering og omarrangering af data**  

### **4.1 Sortere efter en kolonne**  

```python
df = df.sort_values("Alder", ascending=False)  # SortÃ©r efter alder, faldende
```

### **4.2 Omarrangere kolonner**  

```python
df = df[["Navn", "By", "Alder"]]  # Ã†ndrer rÃ¦kkefÃ¸lgen af kolonner
```

> **ğŸ“Œ Brug `sort_values()` til at sortere, og omarranger kolonner med `df[["kol1", "kol2"]]`.**  

---

## ğŸ›  **5. Anvende funktioner pÃ¥ kolonner (`apply()`)**  

`apply()` giver mulighed for **at udfÃ¸re transformationer pÃ¥ kolonner**.  

```python
# Konverter tekst til store bogstaver
df["Navn"] = df["Navn"].apply(lambda x: x.upper())

# Opret en ny kolonne med tilpassede vÃ¦rdier
df["Kategori"] = df["Alder"].apply(lambda x: "Voksen" if x >= 18 else "Barn")
```

> **ğŸ“Œ `apply()` gÃ¸r det nemt at transformere data baseret pÃ¥ regler.**  

---

## ğŸ¯ **6. Ã˜velser**  

### 1ï¸âƒ£ **TilfÃ¸je og fjerne kolonner**
- TilfÃ¸j en ny kolonne `"Alder om 10 Ã¥r"` baseret pÃ¥ `"Alder"`.
- Slet kolonnen igen.

### 2ï¸âƒ£ **Ã†ndre vÃ¦rdier**
- Erstat `"KÃ¸benhavn"` med `"CPH"` i `"By"`-kolonnen.
- Konverter alle navne i `"Navn"`-kolonnen til store bogstaver.

### 3ï¸âƒ£ **HÃ¥ndtering af manglende vÃ¦rdier**
- Find alle `NaN`-vÃ¦rdier i dit datasÃ¦t.
- Erstat manglende alder med gennemsnittet.

### 4ï¸âƒ£ **Sortering og omarrangering**
- SortÃ©r datasÃ¦ttet efter `"Alder"`, stigende.
- Omarranger kolonnerne til `["Navn", "Alder", "By"]`.

### ğŸ”¥ **Bonusudfordring**
- Brug `.apply()` til at lave en `"Kategori"`-kolonne, hvor personer **under 18** fÃ¥r `"Barn"` og **over 18** fÃ¥r `"Voksen"`.

---

## ğŸš€ **7. Opsummering**  
âœ” **TilfÃ¸j og slet kolonner med `df["ny_kol"]` og `drop()`**  
âœ” **Ã†ndr vÃ¦rdier med `.replace()`**  
âœ” **HÃ¥ndter manglende vÃ¦rdier med `.dropna()` og `.fillna()`**  
âœ” **SortÃ©r med `.sort_values()`**  
âœ” **Anvend `apply()` for transformationer**  

**ğŸ“Œ Videre til nÃ¦ste modul: [4.6 - Gruppering og Aggregering](4.6-Gruppering_og_aggregering.md)**  

God fornÃ¸jelse med Pandas! ğŸ¼ğŸš€  
