# ğŸ”— **4.7 Sammenfletning af Data i Pandas**  

Ofte har vi data i flere forskellige datasÃ¦t, som vi Ã¸nsker at **kombinere**.  
I dette modul lÃ¦rer du at bruge **`merge()`**, **`concat()`**, og **`join()`** til at sammenflette data i Pandas.  

> **MÃ¥l for dette modul:**  
> âœ… ForstÃ¥ forskellen mellem `merge()`, `concat()` og `join()`  
> âœ… Sammenflette data baseret pÃ¥ fÃ¦lles kolonner  
> âœ… HÃ¥ndtere forskellige typer af sammenfletninger (inner, outer, left, right)  

---

## ğŸ“Œ **1. Sammenfletning med `merge()`**  

`merge()` minder om SQL `JOIN` og bruges til at **sammenflette to DataFrames baseret pÃ¥ en fÃ¦lles kolonne**.  

```python
import pandas as pd

# FÃ¸rste DataFrame
df1 = pd.DataFrame({
    "ID": [1, 2, 3],
    "Navn": ["Lise", "Anders", "Mia"]
})

# Andet DataFrame
df2 = pd.DataFrame({
    "ID": [1, 2, 4],
    "Alder": [25, 30, 28]
})

# Merge pÃ¥ "ID"-kolonnen
df_merged = pd.merge(df1, df2, on="ID")
print(df_merged)
```

ğŸ“Œ **Output:**  
```
   ID   Navn  Alder
0   1  Lise     25
1   2  Anders   30
```

> **ğŸ“Œ `merge()` udfÃ¸rer som standard en "inner join", hvilket betyder, at kun rÃ¦kker med matchende `ID` beholdes.**  

### **1.1 Typer af sammenfletning i `merge()`**  

| **Type** | **Beskrivelse** |
|----------|---------------|
| `inner` | Beholder kun fÃ¦lles rÃ¦kker |
| `left` | Beholder alle rÃ¦kker fra venstre DataFrame |
| `right` | Beholder alle rÃ¦kker fra hÃ¸jre DataFrame |
| `outer` | Beholder alle rÃ¦kker fra begge DataFrames |

```python
# Venstre join (alle rÃ¦kker fra df1)
df_left = pd.merge(df1, df2, on="ID", how="left")

# HÃ¸jre join (alle rÃ¦kker fra df2)
df_right = pd.merge(df1, df2, on="ID", how="right")

# Fuld join (alle rÃ¦kker fra begge DataFrames)
df_outer = pd.merge(df1, df2, on="ID", how="outer")
```

> **ğŸ“Œ Brug `how="left"`, `how="right"`, eller `how="outer"` afhÃ¦ngigt af, hvilke data du vil bevare.**  

---

## ğŸ”— **2. Sammenfletning med `concat()`**  

Hvis vi vil **kombinere rÃ¦kker fra flere DataFrames**, kan vi bruge `concat()`.  

```python
df1 = pd.DataFrame({"Navn": ["Lise", "Anders"], "Alder": [25, 30]})
df2 = pd.DataFrame({"Navn": ["Mia", "SÃ¸ren"], "Alder": [28, 35]})

df_kombineret = pd.concat([df1, df2], ignore_index=True)
print(df_kombineret)
```

ğŸ“Œ **Output:**  
```
    Navn  Alder
0  Lise     25
1  Anders   30
2    Mia     28
3  SÃ¸ren     35
```

> **ğŸ“Œ `concat()` bruges, nÃ¥r vi vil **tilfÃ¸je rÃ¦kker** til et eksisterende DataFrame.**  

### **2.1 Sammenfletning af kolonner med `concat(axis=1)`**  

```python
df3 = pd.DataFrame({"Job": ["IngeniÃ¸r", "LÃ¦rer", "LÃ¦ge", "Advokat"]})

df_sammen = pd.concat([df_kombineret, df3], axis=1)
print(df_sammen)
```

ğŸ“Œ **Output:**  
```
    Navn  Alder        Job
0  Lise     25  IngeniÃ¸r
1  Anders   30    LÃ¦rer
2    Mia     28     LÃ¦ge
3  SÃ¸ren     35  Advokat
```

> **ğŸ“Œ Brug `axis=1` for at **tilfÃ¸je kolonner** i stedet for rÃ¦kker.**  

---

## ğŸ”„ **3. Sammenfletning med `join()`**  

`join()` bruges, nÃ¥r vi vil **sammenflette DataFrames baseret pÃ¥ indeks i stedet for kolonner**.  

```python
df1 = pd.DataFrame({"Alder": [25, 30, 28]}, index=["Lise", "Anders", "Mia"])
df2 = pd.DataFrame({"Job": ["IngeniÃ¸r", "LÃ¦rer", "LÃ¦ge"]}, index=["Lise", "Anders", "Mia"])

df_joined = df1.join(df2)
print(df_joined)
```

ğŸ“Œ **Output:**  
```
        Alder        Job
Lise      25  IngeniÃ¸r
Anders    30    LÃ¦rer
Mia       28     LÃ¦ge
```

> **ğŸ“Œ `join()` fungerer bedst, nÃ¥r begge DataFrames har samme indeks.**  

---

## ğŸ¯ **4. Ã˜velser**  

### 1ï¸âƒ£ **Sammenfletning med `merge()`**
- Opret to DataFrames med fÃ¦lles kolonnen `"ID"`.
- Sammenflet dem med en `"left join"`.

### 2ï¸âƒ£ **Brug af `concat()`**
- Lav to DataFrames med navne og aldre.
- Kombiner dem til Ã©t stort DataFrame.

### 3ï¸âƒ£ **Brug af `join()`**
- Lav to DataFrames med samme indeks.
- Brug `.join()` til at kombinere dem.

### ğŸ”¥ **Bonusudfordring**
- Brug `merge()` til at sammenflette tre DataFrames baseret pÃ¥ en fÃ¦lles nÃ¸gle.

---

## ğŸš€ **5. Opsummering**  
âœ” **Brug `merge()` til at sammenflette data baseret pÃ¥ en fÃ¦lles kolonne**  
âœ” **Brug `concat()` til at kombinere rÃ¦kker eller kolonner**  
âœ” **Brug `join()` nÃ¥r du vil kombinere data baseret pÃ¥ indeks**  

**ğŸ“Œ Videre til nÃ¦ste modul: [4.8 - Lagring af Data](4.8-Lagring-af-Data.md)**  

God fornÃ¸jelse med sammenfletning af data! ğŸ”—ğŸ¼ğŸš€  
